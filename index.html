<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>15-Min Block Schedule</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 20px;
      color: #333;
      transition: background 0.3s, color 0.3s;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    .schedule {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .item {
      border-bottom: 1px solid #eee;
      padding: 12px 0;
    }

    .time {
      font-weight: bold;
      color: #2a7ae2;
      width: 90px;
      display: inline-block;
    }

    .break {
      font-style: italic;
      color: #666;
    }

    .current {
      background: #d7f0ff;
      border-left: 5px solid #2a7ae2;
      padding-left: 15px;
    }

    button {
      display: block;
      margin: 0 auto 10px auto;
      padding: 6px 12px;
      background-color: #2a7ae2;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    #progressBar {
      width: 100%;
      height: 12px;
      margin: 10px 0 20px;
    }

    /* Dark Mode */
    body.dark {
      background: #121212;
      color: #eee;
    }

    body.dark .schedule {
      background: #1e1e1e;
      box-shadow: 0 2px 8px rgba(255, 255, 255, 0.05);
    }

    body.dark .time {
      color: #90caf9;
    }

    body.dark .break {
      color: #aaa;
    }
    .item input.check {
  margin-right: 8px;
  transform: scale(1.2);
}
.item.checked {
  opacity: 0.5;
  text-decoration: line-through;
}

    /* Mobile Optimization */
    @media (max-width: 500px) {
      .time {
        display: block;
        margin-bottom: 5px;
      }
    }
  </style>
</head>

<body>
  <h1>15-Minute Block Schedule</h1>
  <button onclick="document.body.classList.toggle('dark')">Toggle Dark Mode</button>
  <progress id="progressBar" value="0" max="100"></progress>

  <div id="currentTime" style="text-align:center; font-size:1.2em; margin-bottom:10px;"></div>

  <div class="item" style="display: flex; flex-wrap: wrap; gap: 4px; margin-top: 1em;">
    <!-- Container for 1-min blocks -->
    <div style="display: flex; flex-wrap: wrap; gap: 4px; width: 100%;">
      <!-- Each block is roughly 1/60th of the hour -->
      <!-- I'll create 60 blocks labeled 1 to 60 -->
      <!-- For readability, I give them a small fixed width -->
      <style>
        .one-min-block {
          flex: 0 0 3.2%;
          border: 1px solid #ccc;
          padding: 4px 0;
          font-size: 0.75em;
          text-align: center;
          user-select: none;
          background: #f0f0f0;
          border-radius: 3px;
        }
      </style>
      <script>
        // (For demonstration only, not used in HTML snippet)
        // This script would create the blocks dynamically in a real environment
      </script>
  
      <!-- Blocks manually written here: -->
      <div class="one-min-block" data-start="21:00" data-end="21:01">1</div>
      <div class="one-min-block" data-start="21:01" data-end="21:02">2</div>
      <div class="one-min-block" data-start="21:02" data-end="21:03">3</div>
      <div class="one-min-block" data-start="21:03" data-end="21:04">4</div>
      <div class="one-min-block" data-start="21:04" data-end="21:05">5</div>
      <div class="one-min-block" data-start="21:05" data-end="21:06">6</div>
      <div class="one-min-block" data-start="21:06" data-end="21:07">7</div>
      <div class="one-min-block" data-start="21:07" data-end="21:08">8</div>
      <div class="one-min-block" data-start="21:08" data-end="21:09">9</div>
      <div class="one-min-block" data-start="21:09" data-end="21:10">10</div>
      <div class="one-min-block" data-start="21:10" data-end="21:11">11</div>
      <div class="one-min-block" data-start="21:11" data-end="21:12">12</div>
      <div class="one-min-block" data-start="21:12" data-end="21:13">13</div>
      <div class="one-min-block" data-start="21:13" data-end="21:14">14</div>
      <div class="one-min-block" data-start="21:14" data-end="21:15">15</div>
      <div class="one-min-block" data-start="21:15" data-end="21:16">16</div>
      <div class="one-min-block" data-start="21:16" data-end="21:17">17</div>
      <div class="one-min-block" data-start="21:17" data-end="21:18">18</div>
      <div class="one-min-block" data-start="21:18" data-end="21:19">19</div>
      <div class="one-min-block" data-start="21:19" data-end="21:20">20</div>
      <div class="one-min-block" data-start="21:20" data-end="21:21">21</div>
      <div class="one-min-block" data-start="21:21" data-end="21:22">22</div>
      <div class="one-min-block" data-start="21:22" data-end="21:23">23</div>
      <div class="one-min-block" data-start="21:23" data-end="21:24">24</div>
      <div class="one-min-block" data-start="21:24" data-end="21:25">25</div>
      <div class="one-min-block" data-start="21:25" data-end="21:26">26</div>
      <div class="one-min-block" data-start="21:26" data-end="21:27">27</div>
      <div class="one-min-block" data-start="21:27" data-end="21:28">28</div>
      <div class="one-min-block" data-start="21:28" data-end="21:29">29</div>
      <div class="one-min-block" data-start="21:29" data-end="21:30">30</div>
      <div class="one-min-block" data-start="21:30" data-end="21:31">31</div>
      <div class="one-min-block" data-start="21:31" data-end="21:32">32</div>
      <div class="one-min-block" data-start="21:32" data-end="21:33">33</div>
      <div class="one-min-block" data-start="21:33" data-end="21:34">34</div>
      <div class="one-min-block" data-start="21:34" data-end="21:35">35</div>
      <div class="one-min-block" data-start="21:35" data-end="21:36">36</div>
      <div class="one-min-block" data-start="21:36" data-end="21:37">37</div>
      <div class="one-min-block" data-start="21:37" data-end="21:38">38</div>
      <div class="one-min-block" data-start="21:38" data-end="21:39">39</div>
      <div class="one-min-block" data-start="21:39" data-end="21:40">40</div>
      <div class="one-min-block" data-start="21:40" data-end="21:41">41</div>
      <div class="one-min-block" data-start="21:41" data-end="21:42">42</div>
      <div class="one-min-block" data-start="21:42" data-end="21:43">43</div>
      <div class="one-min-block" data-start="21:43" data-end="21:44">44</div>
      <div class="one-min-block" data-start="21:44" data-end="21:45">45</div>
      <div class="one-min-block" data-start="21:45" data-end="21:46">46</div>
      <div class="one-min-block" data-start="21:46" data-end="21:47">47</div>
      <div class="one-min-block" data-start="21:47" data-end="21:48">48</div>
      <div class="one-min-block" data-start="21:48" data-end="21:49">49</div>
      <div class="one-min-block" data-start="21:49" data-end="21:50">50</div>
      <div class="one-min-block" data-start="21:50" data-end="21:51">51</div>
      <div class="one-min-block" data-start="21:51" data-end="21:52">52</div>
      <div class="one-min-block" data-start="21:52" data-end="21:53">53</div>
      <div class="one-min-block" data-start="21:53" data-end="21:54">54</div>
      <div class="one-min-block" data-start="21:54" data-end="21:55">55</div>
      <div class="one-min-block" data-start="21:55" data-end="21:56">56</div>
      <div class="one-min-block" data-start="21:56" data-end="21:57">57</div>
      <div class="one-min-block" data-start="21:57" data-end="21:58">58</div>
      <div class="one-min-block" data-start="21:58" data-end="21:59">59</div>
      <div class="one-min-block" data-start="21:59" data-end="22:00">60</div>
    </div>
  </div>
  
  
  

  <script>
    function updateCurrentItem() {
      const now = new Date();
      const currentHour = now.getHours();
      const currentMinutes = now.getMinutes();
      const nowTotal = currentHour * 60 + currentMinutes;
      const scheduleItems = document.querySelectorAll(".schedule .item");

      scheduleItems.forEach(item => {
        const start = item.getAttribute("data-start").split(":");
        const end = item.getAttribute("data-end").split(":");
        const startTotal = parseInt(start[0]) * 60 + parseInt(start[1]);
        const endTotal = parseInt(end[0]) * 60 + parseInt(end[1]);

        if (nowTotal >= startTotal && nowTotal < endTotal) {
          item.classList.add("current");
        } else {
          item.classList.remove("current");
        }
      });
    }

    function updateProgress() {
      const now = new Date();
      const nowTotal = now.getHours() * 60 + now.getMinutes();
      const startMinutes = 14 * 60; // 14:00
      const endMinutes = 22 * 60;   // 22:00
      const percent = Math.min(100, Math.max(0, ((nowTotal - startMinutes) / (endMinutes - startMinutes)) * 100));
      document.getElementById("progressBar").value = percent;
    }

    function updateCurrentTime() {
      const now = new Date();
      const hours = now.getHours().toString().padStart(2, '0');
      const minutes = now.getMinutes().toString().padStart(2, '0');
      const seconds = now.getSeconds().toString().padStart(2, '0');
      document.getElementById("currentTime").textContent = `Current time: ${hours}:${minutes}:${seconds}`;
    }

    updateCurrentItem();
    updateProgress();
    updateCurrentTime();
    setInterval(() => {
      updateCurrentItem();
      updateProgress();
      updateCurrentTime();
    }, 1000);

    // ⬇️ NEW CHECKBOX LOGIC using data-id ⬇️
    const items = document.querySelectorAll('.item');

    items.forEach(item => {
      const checkbox = item.querySelector('input.check');
      if (!checkbox) return;

      const id = checkbox.getAttribute('data-id');
      const isChecked = localStorage.getItem('task_' + id) === 'true';
      checkbox.checked = isChecked;
      if (isChecked) item.classList.add('checked');

      checkbox.addEventListener('change', () => {
        item.classList.toggle('checked', checkbox.checked);
        localStorage.setItem('task_' + id, checkbox.checked);
      });
    });
  </script>
  
</body>
</html>